<h1>{{ 'chat.newChat' | translate }}</h1>
<mat-tab-group mat-align-tabs="start">
    <mat-tab [label]="'chat.privateChat' | translate">
        <form class="private-form">
            <h2>{{ 'chat.privateChat' | translate }}</h2>
            <mat-form-field class="example-full-width" appearance="fill">
                <mat-label>{{ 'chat.user' | translate }}</mat-label>
                <input type="text" matInput [formControl]="privateFormUserId" [matAutocomplete]="auto" required>
                <mat-autocomplete #auto="matAutocomplete" [displayWith]="getNameFromId.bind(this)">
                    <mat-option *ngFor="let option of filteredOptionsPrivate$ | async" [value]="option.id">
                        {{ option.name }}
                    </mat-option>
                </mat-autocomplete>
            </mat-form-field>
            <div class="buttons">
                <button mat-flat-button type="submit" (click)="close()">{{ 'framework.close' | translate }}</button>
                <button mat-flat-button color="primary" type="submit" (click)="createPrivateChat(privateFormUserId.value)" [disabled]="!privateFormUserId.valid">{{ 'framework.save' | translate }}</button>    
            </div>
        </form>
    </mat-tab>
    <mat-tab [label]="'chat.groupChat' | translate">
        <form [formGroup]="groupFrom" class="group-form">
            <h2>{{ 'chat.groupChat' | translate }}</h2>
            <mat-form-field>
                <input matInput type="text" formControlName="chatName" [placeholder]="'chat.chatName' | translate">
            </mat-form-field>
            <mat-form-field>
                <ngx-mat-file-input [placeholder]="'chat.chatImage' | translate" formControlName="chatImage" accept=".png, .jpg">
                </ngx-mat-file-input>
                <mat-icon matSuffix aria-hidden="false">attach_file</mat-icon>
            </mat-form-field>
            <mat-form-field>
                <mat-label>{{ 'chat.users' | translate }}</mat-label>
                <mat-chip-list #chipList>
                    <mat-chip *ngFor="let userId of selectedUser" (removed)="removeUser(userId)">
                    {{ userId }}
                        <button matChipRemove>
                            <mat-icon>cancel</mat-icon>
                        </button>
                    </mat-chip>
                    <input [placeholder]="'chat.user' | translate" #userIdInput [formControl]="groupFormUserId"
                        [matAutocomplete]="auto" [matChipInputFor]="chipList" [matChipInputSeparatorKeyCodes]="separatorKeysCodes" (matChipInputTokenEnd)="addUser($event)">
                </mat-chip-list>
                <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selectUser($event)">
                    <mat-option *ngFor="let user of filteredOptionsGroup$ | async" [value]="user.id">
                        {{ user.name }}
                    </mat-option>
                </mat-autocomplete>
            </mat-form-field>
            <div class="buttons">
                <button mat-flat-button type="submit" (click)="close()">{{ 'framework.close' | translate }}</button>
                <button mat-flat-button color="primary" type="submit" (click)="createGroupChat(groupFrom.value)" [disabled]="!groupFrom.valid || !groupFrom.dirty">{{ 'framework.save' | translate }}</button>
            </div>
        </form>
    </mat-tab>
</mat-tab-group>